# ATR-based-crypto-risk-control-software
量化止损被触发的“概率”或“时间预期”，以确保不同币种的止损设置在随机波动下有相似的“耐久性”。
为什么需要这个？高波动币容易快速触发止损，低波动币可能需要更宽的止损位来保持概率一致。用户提到“假设代币价格随机波动止损位被触发的中位时间”，这暗示用随机游走模型（e.g., Brownian motion）来估计止损被击中的中位时间（median time to hit），作为概率的代理（时间越长，概率越低）。
如何实现？基于ATR作为波动率参数，模拟价格路径，计算中位触发时间。这可以帮助用户调整止损位，使不同币的“预期生存时间”一致。
# 风险等价-虚拟货币交易工具

- 运行环境: Python 3.10+
- 安装依赖:

```
pip install -r requirements.txt
```

- 启动:

```
python src/main.py
```

功能:
- 从 OKX CEX 公共 API 拉取目标交易对 K 线，计算 ATR(默认 14)。
- GUI 中输入：ATR、止损位/止损百分比、开仓金额(报价币)，计算止损触发后的亏损金额(USDT)与中位触发时间。
- 假设价格作布朗运动近似的随机游走，根据 ATR 估算到达止损的中位时间。
- 可选：后续扩展到 OKX DEX Token 报价采样估算 ATR。

参数与公式:
- ATR 周期: 默认 14，可在 GUI 设置。
- 开仓金额: 以报价币计价。
- 止损触发亏损金额(报价币) ≈ (开仓金额 / 最新价) × 止损距离(价格)；其中 止损距离 = 最新价 × 止损百分比
- 中位触发时间(近似) ≈ 0.5 × (止损距离 / ATR)^2 × K线周期秒数

界面要点:
- 顶部输入区：交易对、K线周期、ATR 周期、自定义 ATR、开仓金额、止损百分比/止损位、方向。
- 结果区顶部以加粗重点显示：止损亏损金额与止损中位触发时间。
- 详细结果区域展示：价格、ATR、名义规模、参数等。 

## 文档
- [ATR 说明与快速估算指南](./ATR说明指南.md) 
